<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>èŠ±å¤©Judy ï½œQuick Travel Guide</title>
    <style>
        :root {
            /* æ—¥å¼æ¥µç°¡é…è‰²: å’Œç´™ã€å¢¨ã€æ²™æ¼ ã€ä¹¾ç‡¥èŠ± */
            --bg-color: #F9F9F7;
            --card-bg: #FFFFFF;
            --text-main: #333333;
            --text-light: #888888;
            --accent-primary: #BFA588; /* æ²™æ¼ é‡‘ */
            --accent-secondary: #D48888; /* èŠ±å¤©ç²‰ */
            --accent-ocean: #7FA3B5; /* ç´¢ç§‘ç‰¹æ‹‰è— */
            --nav-bg: rgba(255, 255, 255, 0.96);
            --border-radius: 16px;
            --shadow: 0 4px 20px rgba(0,0,0,0.03);
            --font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang TC", "Microsoft JhengHei", sans-serif;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: var(--font-family);
            margin: 0;
            padding: 0;
            padding-bottom: 100px; /* åº•éƒ¨å°èˆªç©ºé–“ */
            line-height: 1.6;
        }

        /* Header */
        header {
            background: var(--bg-color);
            padding: 50px 24px 10px 24px;
            position: sticky;
            top: 0;
            z-index: 10;
            backdrop-filter: blur(5px);
        }

        h1 { margin: 0; font-size: 24px; font-weight: 700; letter-spacing: 1px; color: var(--text-main); }
        .subtitle { font-size: 13px; color: var(--accent-primary); letter-spacing: 2px; text-transform: uppercase; margin-top: 5px; display: block; }

        /* Sections */
        .section { display: none; padding: 10px 20px; animation: fadeIn 0.4s ease; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Timeline Card Design */
        .date-header {
            margin: 30px 0 15px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .date-title { font-size: 18px; font-weight: 700; }
        .weather-badge {
            font-size: 12px;
            color: var(--text-light);
            background: #EFEFED;
            padding: 4px 10px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 18px;
            margin-bottom: 16px;
            box-shadow: var(--shadow);
            position: relative;
            border-left: 3px solid transparent;
            transition: transform 0.1s;
        }
        .card:active { transform: scale(0.99); }

        /* Card Categories */
        .card.transport { border-left-color: #A0A0A0; }
        .card.stay { border-left-color: var(--accent-primary); }
        .card.food { border-left-color: var(--accent-secondary); }
        .card.activity { border-left-color: var(--accent-ocean); }

        .card-time { font-size: 13px; color: var(--accent-primary); font-weight: 600; font-family: monospace; display: block; margin-bottom: 4px; }
        .card-title { font-size: 16px; font-weight: 600; margin-bottom: 8px; line-height: 1.4; }
        .card-desc { font-size: 14px; color: #666; margin-bottom: 12px; white-space: pre-line; }

        /* Highlight Tags */
        .highlight { font-weight: 600; color: var(--accent-secondary); background: #FFF0F0; padding: 0 4px; border-radius: 4px; }
        .tag-info { font-weight: 600; color: var(--accent-ocean); background: #F0F8FF; padding: 0 4px; border-radius: 4px; }

        /* Navigation Button */
        .btn-nav {
            display: inline-flex;
            align-items: center;
            background: #F4F4F4;
            color: var(--text-main);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            text-decoration: none;
            gap: 4px;
        }
        .btn-nav:hover { background: #EAEAEA; }

        /* Flight & Info Cards */
        .info-group { margin-bottom: 30px; }
        .info-title { font-size: 14px; color: var(--text-light); margin-bottom: 10px; font-weight: 600; letter-spacing: 1px; }
        .flight-row {
            display: grid;
            grid-template-columns: 0.8fr 1.5fr 1fr;
            padding: 12px 0;
            border-bottom: 1px solid #F0F0F0;
            font-size: 14px;
        }
        .flight-row:last-child { border-bottom: none; }
        .flight-code { color: var(--accent-primary); font-weight: 600; }

        /* Checklist */
        .check-group { margin-bottom: 25px; }
        .check-header { font-size: 15px; font-weight: 700; color: var(--accent-ocean); margin-bottom: 10px; border-bottom: 2px solid #F0F8FF; padding-bottom: 5px; display: inline-block; }
        
        .check-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f9f9f9;
            cursor: pointer;
            transition: all 0.2s;
        }
        .checkbox {
            width: 20px; height: 20px;
            border: 1.5px solid #CCC;
            border-radius: 50%;
            margin-right: 12px;
            display: flex; align-items: center; justify-content: center;
        }
        .check-item.checked .checkbox { background: var(--accent-secondary); border-color: var(--accent-secondary); }
        .check-item.checked .checkbox::after { content: 'âœ“'; color: white; font-size: 12px; }
        .check-item.checked span { color: #CCC; text-decoration: line-through; }

        /* Bottom Nav */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0; right: 0;
            background: var(--nav-bg);
            border-top: 1px solid rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-around;
            padding: 12px 0 24px 0; /* Extra padding for iOS home bar */
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        .nav-item {
            text-align: center;
            font-size: 10px;
            color: #BBB;
            cursor: pointer;
            flex: 1;
            transition: color 0.2s;
        }
        .nav-item.active { color: var(--text-main); font-weight: 600; }
        .nav-icon { font-size: 20px; display: block; margin-bottom: 4px; }

    </style>
</head>
<body>

    <header>
        <h1>èŠ±å¤©Judy</h1>
        <span class="subtitle">Quick Travel Guide</span>
    </header>

    <div id="tab-timeline" class="section active">
        <div id="timeline-container"></div>
    </div>

    <div id="tab-info" class="section">
        <div class="info-group">
            <div class="info-title">âœˆï¸ FLIGHTS</div>
            <div class="card">
                <div id="flights-container"></div>
            </div>
        </div>

        <div class="info-group">
            <div class="info-title">ğŸ¨ ACCOMMODATION</div>
            <div id="hotels-container"></div>
        </div>

        <div class="info-group">
            <div class="info-title">ğŸ—ºï¸ MAP</div>
            <div class="card">
                <div class="card-title">æ™¯é»åœ°åœ–</div>
                <div class="card-desc">å·²ç‚ºæ‚¨æ¨™è¨˜è¡Œç¨‹é‡é»ä½ç½®ã€‚</div>
                <a href="https://www.google.com/maps/search/?api=1&query=Dubai+Socotra" target="_blank" class="btn-nav" style="width:100%; justify-content:center;">é–‹å•Ÿ Google Maps</a>
            </div>
        </div>
    </div>

    <div id="tab-checklist" class="section">
        <div id="checklist-container"></div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('timeline', this)">
            <span class="nav-icon">ğŸ“…</span>è¡Œç¨‹
        </div>
        <div class="nav-item" onclick="switchTab('info', this)">
            <span class="nav-icon">ğŸ«</span>è³‡è¨Š
        </div>
        <div class="nav-item" onclick="switchTab('checklist', this)">
            <span class="nav-icon">ğŸ’</span>æ‰“åŒ…
        </div>
    </nav>

    <script>
        // --- DATA ---
        
        const tripData = {
            flights: [
                {date: "2/15", code: "EK367", route: "TPE â†’ DXB", time: "23:00 - 04:50", term: "T3"},
                {date: "2/16", code: "XY502", route: "DXB â†’ JED", time: "12:20 - 14:45", term: "T1"},
                {date: "2/17", code: "IY525", route: "JED â†’ SCT", time: "11:00 - 14:30", term: "-"},
                {date: "2/23", code: "IY526", route: "SCT â†’ JED", time: "10:30 - 14:00", term: "-"},
                {date: "2/23", code: "XY505", route: "JED â†’ DXB", time: "17:00 - 20:45", term: "-"},
                {date: "2/26", code: "EK386", route: "DXB â†’ TPE", time: "08:45 - 20:40", term: "T3"}
            ],
            hotels: [
                {name: "Best Western Plus Jeddah", addr: "Madinah Road, Jeddah", desc: "é„°è¿‘æ¿±æµ·è·¯"},
                {name: "Socotra Campsites", addr: "Socotra Island", desc: "Erisel / Fermhin / Detwah (Private Tents)"},
                {name: "Grande Signature Apartments", addr: "Downtown Dubai", desc: "æœæ‹œå¸‚ä¸­å¿ƒ"}
            ],
            itinerary: [
                {
                    date: "2/15 (æ—¥)", loc: "Taipei", lat: 25.07, lon: 121.23,
                    items: [
                        {type: "transport", time: "23:00", title: "EK367 èµ·é£›", desc: "å‰å¾€æœæ‹œ | é£›è¡Œæ™‚é–“ç´„ 10hr", nav: "Taoyuan International Airport"}
                    ]
                },
                {
                    date: "2/16 (ä¸€)", loc: "Jeddah", lat: 21.54, lon: 39.17,
                    items: [
                        {type: "transport", time: "04:50", title: "æŠµé”æœæ‹œ", desc: "è½‰æ©Ÿç­‰å¾… (DXB)"},
                        {type: "transport", time: "12:20", title: "é£›å¾€å‰é”", desc: "XY502 | æŠµé”å¾Œå…¥å¢ƒæ²™çƒåœ°"},
                        {type: "stay", time: "16:00", title: "Check-in", desc: "Best Western Plus Jeddah Hotel", nav: "Best Western Plus Jeddah Hotel Madinah Road"},
                        {type: "food", time: "Night", title: "Waterfront Dinner", desc: "å‰é”æ¿±æµ·è·¯æ•£æ­¥èˆ‡æ™šé¤", nav: "Jeddah Corniche"}
                    ]
                },
                {
                    date: "2/17 (äºŒ)", loc: "Socotra", lat: 12.6, lon: 54.0,
                    items: [
                        {type: "transport", time: "11:00", title: "é£›å¾€ç´¢ç§‘ç‰¹æ‹‰", desc: "IY525 (JED -> SCT)"},
                        {type: "activity", time: "14:30", title: "Majestic White Dunes", desc: "æŠµé”ï¼Œæ­ä¹˜4x4å‰å¾€æ±éƒ¨ã€‚é€”ç¶“é¦–éƒ½ Hadiboï¼Œé çœº Hajhair å±±è„ˆã€‚"},
                        {type: "stay", time: "Night", title: "Erisel Beach éœ²ç‡Ÿ", desc: "ç¬¬ä¸€æ™šæµ·ç˜ç§äººå¸³ç¯·ï¼Œäº«å—æ˜Ÿç©ºã€‚", nav: "Arher Beach"}
                    ]
                },
                {
                    date: "2/18 (ä¸‰)", loc: "Socotra", lat: 12.6, lon: 54.0,
                    items: [
                        {type: "activity", time: "Sunrise", title: "Arher Sand Dunes", desc: "å¿…çœ‹æ—¥å‡ºï¼çˆ¬ä¸Šå·¨å¤§æ²™ä¸˜ã€æ»‘æ²™ã€‚æ—©é¤æ™‚ç•™æ„æµ·è±š (Spinner Dolphins)ã€‚", nav: "Arher Beach"},
                        {type: "activity", time: "Day", title: "Dihamri æµ·æ´‹ä¿è­·å€", desc: "æµ®æ½›ç†±é» (Snorkeling)ï¼Œè±å¯ŒçŠç‘šèˆ‡é­šç¾¤ã€‚äº«ç”¨åˆé¤ã€‚", nav: "Dihamri Marine Protected Area"},
                        {type: "activity", time: "PM", title: "Homhil ç„¡é‚Šéš›æ³³æ± ", desc: "çµ•ç¾å¤©ç„¶æ³³æ±  (Infinity Pool)ï¼Œçœºæœ›åŒ—å²¸ã€‚æ²¿é€”å¯è¦‹ç“¶å­æ¨¹èˆ‡é¾è¡€æ¨¹ã€‚", nav: "Homhil Protected Area"},
                        {type: "stay", time: "Night", title: "Erisel Beach éœ²ç‡Ÿ", desc: "è¿”å›æ±å²¸ç‡Ÿåœ°éå¤œã€‚"}
                    ]
                },
                {
                    date: "2/19 (å››)", loc: "Socotra", lat: 12.5, lon: 53.9,
                    items: [
                        {type: "activity", time: "AM", title: "Kaleesan White Canyon", desc: "ç™½è‰²å³½è°·èˆ‡è”šè—æ± æ°´ï¼Œé©åˆæ¸¸æ³³è·³æ°´ã€‚", nav: "Wadi Kalisan"},
                        {type: "activity", time: "PM", title: "Zahek Desert & Camel", desc: "æ²™æ¼ æ¼«æ­¥èˆ‡é¨é§±é§ï¼Œé«”é©—é˜¿æ‹‰ä¼¯ä¹‹å¤œæ°›åœã€‚", nav: "Zahek Dunes"},
                        {type: "activity", time: "Stop", title: "Digub Cave", desc: "å·¨å¤§æ´ç©´ï¼Œä¿¯ç°å—å²¸ç¾æ™¯ã€‚", nav: "Digub Cave"},
                        {type: "stay", time: "Night", title: "Fermhin Forest Camp", desc: "å‰å¾€ Dixam é«˜åŸï¼Œåœ¨ä¸–ç•Œæœ€å¤§é¾è¡€æ¨¹æ£®æ—ä¸­éœ²ç‡Ÿã€‚", nav: "Fermhin Forest"}
                    ]
                },
                {
                    date: "2/20 (äº”)", loc: "Socotra", lat: 12.5, lon: 53.9,
                    items: [
                        {type: "activity", time: "AM", title: "é¾è¡€æ¨¹æ£®æ—æ—¥å‡º", desc: "æ¢ç´¢ç‰¹æœ‰ç¨®å‹•æ¤ç‰©ï¼Œäº«å—é­”å¹»æ™‚åˆ»ã€‚"},
                        {type: "activity", time: "PM", title: "æ‹œ
