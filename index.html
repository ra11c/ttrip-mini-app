<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>èŠ±å¤©ï¼ªudy | Travel Quick Guide</title>
    <style>
        :root {
            /* Palette: Japanese Minimalist x Desert Vibes */
            --bg-color: #FAFAF8;
            --card-bg: #FFFFFF;
            --text-main: #2C2C2C;
            --text-sub: #8C8C8C;
            --accent-sand: #C8AD7F;      /* æ²™æ¼ é‡‘ */
            --accent-ocean: #5E8B7E;     /* ç´¢ç§‘ç‰¹æ‹‰è—ç¶  */
            --accent-alert: #D9534F;
            --nav-bg: rgba(255, 255, 255, 0.95);
            --border-radius: 12px;
            --shadow: 0 2px 10px rgba(0,0,0,0.04);
            --font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: var(--font-main);
            margin: 0;
            padding: 0;
            padding-bottom: 90px; /* Space for bottom nav */
            line-height: 1.5;
        }

        /* HEADER */
        header {
            padding: 40px 20px 10px 20px;
            background: var(--bg-color);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        h1 { margin: 0; font-size: 22px; font-weight: 700; letter-spacing: 0.5px; }
        .subtitle { font-size: 13px; color: var(--text-sub); margin-top: 4px; display: block; }

        /* SECTIONS & TABS */
        .section { display: none; padding: 10px 20px; animation: fadeIn 0.3s ease; }
        .section.active { display: block; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* TIMELINE CARDS */
        .day-group { margin-bottom: 30px; }
        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 12px;
            padding-left: 4px;
        }
        .day-date { font-size: 16px; font-weight: 700; color: var(--text-main); }
        .day-weather { font-size: 12px; color: var(--text-sub); background: #EFEFEF; padding: 2px 8px; border-radius: 10px; }

        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: var(--shadow);
            position: relative;
            border-left: 4px solid #ddd;
        }

        /* Card Categories */
        .card.transport { border-left-color: #A0A0A0; }
        .card.stay { border-left-color: var(--text-main); }
        .card.food { border-left-color: var(--accent-alert); }
        .card.activity { border-left-color: var(--accent-sand); }
        .card.highlight { border-left-color: var(--accent-ocean); background: #F4F8F7; }

        .time { font-size: 13px; color: var(--text-sub); font-weight: 600; font-family: monospace; display: block; margin-bottom: 4px; }
        .card-title { font-size: 16px; font-weight: 600; margin-bottom: 6px; }
        .card-desc { font-size: 14px; color: #555; margin-bottom: 10px; white-space: pre-line; }

        /* Guide Tags */
        .tag {
            display: inline-block;
            font-size: 10px;
            padding: 3px 6px;
            border-radius: 4px;
            margin-right: 5px;
            font-weight: 600;
            text-transform: uppercase;
        }
        .tag.guide { background: #E8F5E9; color: #2E7D32; border: 1px solid #C8E6C9; }
        .tag.alert { background: #FFEBEE; color: #C62828; }
        .tag.photo { background: #E3F2FD; color: #1565C0; }

        /* Navigation Button */
        .btn-nav {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: #F2F2F2;
            color: var(--text-main);
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 5px;
            transition: background 0.2s;
        }
        .btn-nav:active { background: #E0E0E0; }

        /* FLIGHTS TABLE */
        .flight-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 16px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }
        .flight-route { font-weight: 700; font-size: 15px; margin-bottom: 8px; display: flex; justify-content: space-between; }
        .flight-detail { display: flex; justify-content: space-between; color: #666; font-size: 13px; margin-top: 4px; }
        .flight-code { color: var(--accent-ocean); font-weight: 600; font-family: monospace; }

        /* CHECKLIST */
        .check-group { margin-bottom: 25px; }
        .check-title { font-size: 14px; font-weight: 700; margin-bottom: 10px; color: var(--accent-sand); text-transform: uppercase; letter-spacing: 1px;}
        .check-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
        }
        .check-box {
            width: 20px; height: 20px;
            border: 2px solid #ddd;
            border-radius: 50%;
            margin-right: 12px;
            transition: all 0.2s;
            position: relative;
        }
        .check-item.checked .check-box { background: var(--accent-ocean); border-color: var(--accent-ocean); }
        .check-item.checked .check-box::after { content: 'âœ“'; color: white; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 12px; }
        .check-item.checked span { text-decoration: line-through; color: #ccc; }

        /* BOTTOM NAV */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: var(--nav-bg);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-around;
            padding: 10px 0 20px 0; /* Extra padding for iPhone home bar */
            z-index: 100;
        }
        .nav-item {
            text-align: center;
            color: #bbb;
            font-size: 10px;
            flex: 1;
            cursor: pointer;
        }
        .nav-item.active { color: var(--text-main); font-weight: 600; }
        .nav-icon { font-size: 20px; display: block; margin-bottom: 4px; }

    </style>
</head>
<body>

    <header>
        <h1>Middle East 2026</h1>
        <span class="subtitle">11 Days Trip â€¢ Dubai & Socotra</span>
    </header>

    <div id="tab-timeline" class="section active">
        <div id="timeline-container"></div>
    </div>

    <div id="tab-info" class="section">
        <h3 style="margin-bottom: 15px;">ğŸ›« èˆªç­è³‡è¨Š (Flights)</h3>
        <div id="flights-container"></div>
        
        <h3 style="margin-top: 30px; margin-bottom: 15px;">ğŸ¨ ä½å®¿è³‡è¨Š (Hotels)</h3>
        <div id="hotels-container"></div>

        <h3 style="margin-top: 30px; margin-bottom: 15px;">ğŸ—ºï¸ åœ°åœ–èˆ‡å°èˆª</h3>
        <div class="card">
            <div class="card-desc">é»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å•Ÿä¸»è¦æ™¯é»åœ°åœ–åˆ—è¡¨</div>
            <a href="https://www.google.com/maps/search/Dubai+Jeddah+Socotra" target="_blank" class="btn-nav" style="width:100%">ğŸŒ é–‹å•Ÿ Google Maps</a>
        </div>
    </div>

    <div id="tab-checklist" class="section">
        <h3 style="margin-bottom: 15px;">ğŸ’ æ‰“åŒ…æ¸…å–®</h3>
        <div class="card" style="background:#FFF8E1; border-left:none;">
            <div class="card-desc">âš ï¸ <b>ç´¢ç§‘ç‰¹æ‹‰é™é‡ï¼š</b><br>è¨—é‹ï¼š23kg | æ‰‹æï¼š7kg<br>ç™»å±±å°åŒ…ï¼šç›¸æ©Ÿã€æ°´ã€æ¯›å·¾</div>
        </div>
        <div id="checklist-container"></div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('timeline', this)">
            <span class="nav-icon">ğŸ“…</span>è¡Œç¨‹
        </div>
        <div class="nav-item" onclick="switchTab('info', this)">
            <span class="nav-icon">ğŸ«</span>è³‡è¨Š
        </div>
        <div class="nav-item" onclick="switchTab('checklist', this)">
            <span class="nav-icon">âœ…</span>æ¸…å–®
        </div>
    </nav>

    <script>
        // --- DATA ---
        
        // Flight Data
        const flights = [
            { date: "2/15", route: "TPE å°åŒ— â†’ DXB æœæ‹œ", code: "EK367", time: "23:00 - 04:50 (+1)", term: "T3" },
            { date: "2/16", route: "DXB æœæ‹œ â†’ JED å‰é”", code: "XY502", time: "12:20 - 14:45", term: "T1" },
            { date: "2/17", route: "JED å‰é” â†’ SCT ç´¢ç§‘ç‰¹æ‹‰", code: "IY525", time: "11:00 - 14:30", term: "-" },
            { date: "2/23", route: "SCT ç´¢ç§‘ç‰¹æ‹‰ â†’ JED å‰é”", code: "IY526", time: "10:30 - 14:00", term: "-" },
            { date: "2/23", route: "JED å‰é” â†’ DXB æœæ‹œ", code: "XY505", time: "17:00 - 20:45", term: "-" },
            { date: "2/26", route: "DXB æœæ‹œ â†’ TPE å°åŒ—", code: "EK386", time: "08:45 - 20:40", term: "T3" }
        ];

        // Hotel Data
        const hotels = [
            { name: "Best Western Plus Jeddah", address: "Madinah Road, Jeddah, Saudi Arabia", date: "2/16 Check-in" },
            { name: "Socotra Camping", address: "Erisel / Fermhin / Detwah (Private Tent)", date: "2/17 - 2/22" },
            { name: "Grande Signature Apartments", address: "Downtown Dubai", date: "2/23 Check-in" }
        ];

        // Itinerary Data
        // Types: transport, stay, food, activity, highlight
        const itinerary = [
            {
                date: "2/15 (æ—¥)", city: "Taipei", lat: 25.03, lon: 121.56,
                items: [
                    { time: "23:00", title: "EK367 èµ·é£›", type: "transport", desc: "å‰å¾€æœæ‹œ | é£›è¡Œæ™‚é–“ç´„ 9hr 50m", nav: "Taoyuan International Airport" }
                ]
            },
            {
                date: "2/16 (ä¸€)", city: "Jeddah", lat: 21.54, lon: 39.17,
                items: [
                    { time: "04:50", title: "æŠµé”æœæ‹œ (DXB)", type: "transport", desc: "è½‰æ©Ÿç­‰å¾… | æœæ‹œåœ‹éš›æ©Ÿå ´" },
                    { time: "12:20", title: "XY502 é£›å¾€å‰é”", type: "transport", desc: "FlyNas èˆªç©º" },
                    { time: "14:45", title: "æŠµé”å‰é” (JED)", type: "transport", desc: "å…¥å¢ƒæ²™çƒåœ°é˜¿æ‹‰ä¼¯", nav: "King Abdulaziz International Airport" },
                    { time: "16:00", title: "Check-in é£¯åº—", type: "stay", desc: "Best Western Plus Jeddah Hotel", nav: "Best Western Plus Jeddah Hotel Madinah Road" },
                    { time: "19:00", title: "Waterfront Dinner", type: "food", desc: "å‰é”æ¿±æµ·è·¯æ•£æ­¥èˆ‡æ™šé¤", nav: "Jeddah Corniche" }
                ]
            },
            {
                date: "2/17 (äºŒ)", city: "Socotra", lat: 12.46, lon: 53.82,
                items: [
                    { time: "11:00", title: "IY525 é£›å¾€ç´¢ç§‘ç‰¹æ‹‰", type: "transport", desc: "Yemenia Airways" },
                    { time: "14:30", title: "æŠµé”ç´¢ç§‘ç‰¹æ‹‰ (SCT)", type: "transport", desc: "å°éŠæ¥æ©Ÿï¼Œè½‰ä¹˜ 4x4", nav: "Socotra Airport" },
                    { time: "Day", title: "Hadibo & Hajhair Mountains", type: "activity", desc: "é€”ç¶“é¦–éƒ½ Hadiboï¼Œé çœº Hajhair å±±è„ˆ" },
                    { time: "Night", title: "Erisel æµ·ç˜éœ²ç‡Ÿ", type: "stay", desc: "ç§äººå¸³ç¯·ï¼Œæµ·é‚Šè§€æ˜Ÿ", nav: "Arher Beach" }
                ]
            },
            {
                date: "2/18 (ä¸‰)", city: "Socotra", lat: 12.46, lon: 53.82,
                items: [
                    { time: "Sunrise", title: "Arher ç™½æ²™ä¸˜æ—¥å‡º", type: "highlight", desc: "çˆ¬ä¸Šæ²™ä¸˜çœ‹æ—¥å‡ºï¼Œå¯æ»‘æ²™", nav: "Arher Beach" },
                    { time: "Morning", title: "æ—©é¤èˆ‡æµ·è±š", type: "food", desc: "æµ·ç˜æ—©é¤ï¼Œç•™æ„ Spinner Dolphins" },
                    { time: "Day", title: "Dihamri æµ·æ´‹ä¿è­·å€", type: "activity", desc: "æµ®æ½›ç†±é» (è£å‚™å·²å«)ï¼ŒçŠç‘šç¤è±å¯Œ", nav: "Dihamri Marine Protected Area" },
                    { time: "Afternoon", title: "Homhil å¤©ç„¶ç„¡é‚Šéš›æ³³æ± ", type: "highlight", desc: "çµ•æ™¯ï¼ç“¶å­æ¨¹èˆ‡é¾è¡€æ¨¹å±±è°·", nav: "Homhil Protected Area" },
                    { time: "Night", title: "Erisel æµ·ç˜éœ²ç‡Ÿ", type: "stay", desc: "è¿”å›æ±å²¸éœ²ç‡Ÿ" }
                ]
            },
            {
                date: "2/19 (å››)", city: "Socotra", lat: 12.46, lon: 53.82,
                items: [
                    { time: "Morning", title: "Kaleesan ç™½è‰²å³½è°·", type: "activity", desc: "è”šè—è‰²æ± æ°´èˆ‡ç™½è‰²å²©çŸ³ï¼Œé©åˆæ¸¸æ³³", nav: "Wadi Kalisan" },
                    { time: "Afternoon", title: "Zahek æ²™æ¼ èˆ‡é§±é§", type: "activity", desc: "é¨é§±é§é«”é©—ï¼Œé˜¿æ‹‰ä¼¯ä¹‹å¤œæ°›åœ", nav: "Zahek Dunes" },
                    { time: "Spot", title: "Digub Cave", type: "activity", desc: "å·¨å¤§æ´ç©´ï¼Œä¿¯ç°å—å²¸é¢¨æ™¯", nav: "Digub Cave" },
                    { time: "Night", title: "Fermhin æ£®æ—éœ²ç‡Ÿ", type: "stay", desc: "ç¡åœ¨ä¸–ç•Œæœ€å¤§é¾è¡€æ¨¹æ£®æ—ä¸­", nav: "Fermhin Forest" }
                ]
            },
            {
                date: "2/20 (äº”)", city: "Socotra", lat: 12.46, lon: 53.82,
                items: [
                    { time: "Morning", title: "é¾è¡€æ¨¹æ£®æ—æ¢ç´¢", type: "highlight", desc: "ä¸–ç•Œä¸Šæœ€å¤§çš„é¾è¡€æ¨¹é›†ä¸­åœ°ï¼Œå°‹æ‰¾ç‰¹æœ‰ç¨®å‹•æ¤ç‰©", nav: "Dragon Blood Tree Forest" },
                    { time: "Afternoon", title: "Bedouin æ‘è½æ‹œè¨ª", type: "activity", desc: "é«”é©—ç•¶åœ°è²éƒ½å› ç”Ÿæ´»ï¼Œåƒè§€é¾è¡€æ¨¹è‹—åœƒ" },
                    { time: "Night", title: "Fermhin æ£®æ—éœ²ç‡Ÿ", type: "stay", desc: "ç§äººç‡Ÿåœ°éå¤œ" }
                ]
            },
            {
                date: "2/21 (å…­)", city: "Socotra", lat: 12.46, lon: 53.82,
                items: [
                    { time: "Morning", title: "æ£®æ—æ—¥å‡º", type: "activity", desc: "æ¢ç´¢ä¸åŒå€åŸŸçš„æ£®æ—æ™¯è§€" },
                    { time: "Day", title: "Detwah Lagoon", type: "highlight", desc: "è—è‰²æ½Ÿæ¹–ï¼Œç™½æ²™èˆ‡è—æ°´çš„å¼·çƒˆå°æ¯”", nav: "Detwah Lagoon" },
                    { time: "Sunset", title: "æ½Ÿæ¹–å±±é ‚æ—¥è½", type: "activity", desc: "çˆ¬ä¸Šå±±ä¸˜çœ‹å…¨æ™¯èˆ‡å­¤ç¨ç“¶å­æ¨¹" },
                    { time: "Night", title: "Detwah æ½Ÿæ¹–éœ²ç‡Ÿ", type: "stay", desc: "æ½Ÿæ¹–æ—å°ˆå±¬ç‡Ÿåœ°" }
                ]
            },
            {
                date: "2/22 (æ—¥)", city: "Socotra", lat: 12.46, lon: 53.82,
                items: [
                    { time: "Morning", title: "Shoab Beach èˆ¹éŠ", type: "activity", desc: "ä¹˜èˆ¹å‰å¾€é»ƒé‡‘æµ·ç˜ï¼Œå°‹æ‰¾æµ·è±š", nav: "Shoab Beach" },
                    { time: "Relax", title: "æµ·ç˜æ™‚å…‰", type: "activity", desc: "æ¸¸æ³³ã€æ”¾é¬†" },
                    { time: "Afternoon", title: "Qalansiyah å°é®", type: "activity", desc: "åƒè§€å³¶ä¸Šç¬¬äºŒå¤§åŸé®", nav: "Qalansiyah" }
                ]
            },
            {
                date: "2/23 (ä¸€)", city: "Dubai", lat: 25.20, lon: 55.27,
                items: [
                    { time: "Morning", title: "å‘Šåˆ¥ç´¢ç§‘ç‰¹æ‹‰", type: "activity", desc: "é€”ç¶“äºŒæˆ°ä¿„ç¾…æ–¯å¦å…‹éºè·¡æ‹ç…§", nav: "Russian Tanks Socotra" },
                    { time: "10:30", title: "IY526 é£›å¾€å‰é”", type: "transport", desc: "å‰å¾€è½‰æ©Ÿ" },
                    { time: "17:00", title: "XY505 é£›å¾€æœæ‹œ", type: "transport", desc: "è¿”å› UAE" },
                    { time: "20:45", title: "æŠµé”æœæ‹œ", type: "transport", desc: "æ¥æ©Ÿå‰å¾€å¸‚å€" },
                    { time: "Night", title: "å…¥ä½ Grande Signature", type: "stay", desc: "Downtown Dubai", nav: "Grande Signature Apartments Dubai" }
                ]
            },
            {
                date: "2/24 (äºŒ)", city: "Abu Dhabi", lat: 24.45, lon: 54.37,
                items: [
                    { time: "Morning", title: "è¬èµ«æ‰è€¶å¾·å¤§æ¸…çœŸå¯º", type: "highlight", desc: "æœè£åš´æ ¼ï¼šé•·è¢–é•·è¤²åŒ…é ­", nav: "Sheikh Zayed Grand Mosque" },
                    { time: "Noon", title: "é˜¿å¸ƒé”æ¯”ç¾…æµ®å®®", type: "activity", desc: "æµ·ä¸Šåšç‰©é¤¨ï¼Œå…‰ä¹‹é›¨", nav: "Louvre Abu Dhabi" },
                    { time: "Afternoon", title: "é¨é¦¬é«”é©—", type: "activity", desc: "æ²™æ¼ æˆ–æµ·ç˜é¨é¦¬" },
                    { time: "Dinner", title: "Time Out Market", type: "food", desc: "æ¬£è³å“ˆé‡Œç™¼å¡”æ°´èˆç§€", nav: "Time Out Market Dubai" }
                ]
            },
            {
                date: "2/25 (ä¸‰)", city: "Dubai", lat: 25.20, lon: 55.27,
                items: [
                    { time: "Morning", title: "èˆŠåŸå€æ•£æ­¥", type: "activity", desc: "é»ƒé‡‘å¸‚é›†ã€é¦™æ–™å¸‚é›†ã€Abraèˆ¹", nav: "Al Fahidi Historical Neighbourhood" },
                    { time: "Afternoon", title: "å“ˆé‡Œç™¼å¡” 124F", type: "highlight", desc: "ä¸–ç•Œæœ€é«˜æ¨“å±•æœ›å°", nav: "Burj Khalifa" },
                    { time: "Evening", title: "Desert Safari", type: "activity", desc: "æ²™æ¼ è¡æ²™èˆ‡æ™šé¤ç§€", nav: null }
                ]
            },
            {
                date: "2/26 (å››)", city: "Taipei", lat: 25.03, lon: 121.56,
                items: [
                    { time: "08:45", title: "EK386 èµ·é£›", type: "transport", desc: "å¸¶è‘—å›æ†¶è¿”å®¶" },
                    { time: "20:40", title: "æŠµé”å°åŒ—", type: "transport", desc: "å¹³å®‰æŠµé”" }
                ]
            }
        ];

        const checklistData = {
            "å¿…å‚™è­‰ä»¶": ["è­·ç…§ (æ•ˆæœŸ6å€‹æœˆ+)", "è‘‰é–€/æ²™çƒåœ°/æœæ‹œ ç°½è­‰", "é›»å­æ©Ÿç¥¨", "æ—…éŠä¿éšªå–®", "ç¾é‡‘ç¾é‡‘ (æ–°éˆ”)"],
            "ç´¢ç§‘ç‰¹æ‹‰è£å‚™": ["è¼•ä¾¿ç™»å±±åŒ… (Daypack)", "é ­ç‡ˆ (Headlamp)", "è¡Œå‹•é›»æº x2", "æ¿•ç´™å·¾/è¡›ç”Ÿç´™ (å¤§é‡)", "ç’°ä¿æ´—é«®æ²æµ´ä¹³", "å¿«ä¹¾æ¯›å·¾", "æšˆè»Šè—¥"],
            "è¡£ç‰©": ["æ³³è¡£/æ°´æ¯è¡£", "å¥è¡Œé‹/æ¶¼é‹", "è–„å¤–å¥— (æ²™æ¼ æº«å·®)", "é•·è£™/é•·è¤² (æ¸…çœŸå¯ºç”¨)", "å¤ªé™½çœ¼é¡/é®é™½å¸½"],
            "é›»å­": ["ç›¸æ©Ÿ + å‚™ç”¨é›»æ± ", "è¬ç”¨è½‰æ¥é ­ (Type G)", "é˜²æ°´è¢‹", "ä¸‹è¼‰é›¢ç·šåœ°åœ–"]
        };

        // --- FUNCTIONS ---

        function init() {
            renderTimeline();
            renderFlights();
            renderHotels();
            renderChecklist();
        }

        // Weather API (Open-Meteo)
        async function fetchWeather(lat, lon, elementId) {
            try {
                // Fetching current weather for simplicity
                const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
                const data = await res.json();
                const temp = Math.round(data.current_weather.temperature);
                const code = data.current_weather.weathercode;
                
                let icon = "â˜€ï¸";
                if(code > 3) icon = "â˜ï¸";
                if(code > 50) icon = "ğŸŒ§ï¸";
                
                document.getElementById(elementId).innerHTML = `${icon} ${temp}Â°C`;
            } catch (e) {
                document.getElementById(elementId).innerHTML = "ğŸŒ¤ï¸";
            }
        }

        // Auto-Generate Guide Tags based on text
        function generateTags(text) {
            let tags = "";
            const keywords = {
                "guide": ["å¿…æ‹", "ä¸–ç•Œéºç”¢", "çµ•æ™¯", "å¿…å»"],
                "photo": ["æ—¥å‡º", "æ—¥è½", "åˆç…§", "selfie"],
                "alert": ["æœè£", "æ³¨æ„", "é™é‡", "ç¾é‡‘"]
            };

            // Simple "AI" simulation
            if (text.includes("æ—¥å‡º") || text.includes("Sunrise")) tags += `<span class="tag photo">ğŸ“¸ æ—¥å‡º</span>`;
            if (text.includes("ä¸–ç•Œéºç”¢") || text.includes("é¾è¡€æ¨¹")) tags += `<span class="tag guide">ğŸŒ¿ å¿…çœ‹</span>`;
            if (text.includes("æœè£") || text.includes("æ¸…çœŸå¯º")) tags += `<span class="tag alert">âš ï¸ æœå„€</span>`;
            if (text.includes("æµ®æ½›") || text.includes("æ¸¸æ³³")) tags += `<span class="tag photo">ğŸ¤¿ ç©æ°´</span>`;
            
            return tags;
        }

        function renderTimeline() {
            const container = document.getElementById('timeline-container');
            let html = '';
            
            itinerary.forEach((day, idx) => {
                const weatherId = `w-${idx}`;
                fetchWeather(day.lat, day.lon, weatherId); // Trigger weather fetch

                let itemsHtml = day.items.map(item => {
                    const navBtn = item.nav ? `<a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.nav)}" target="_blank" class="btn-nav">ğŸ“ å°èˆª</a>` : '';
                    const tags = generateTags(item.desc + item.title);
                    
                    return `
                    <div class="card ${item.type}">
                        <span class="time">${item.time}</span>
                        <div class="card-title">${item.title}</div>
                        <div class="card-desc">${tags}${item.desc}</div>
                        ${navBtn}
                    </div>
                    `;
                }).join('');

                html += `
                    <div class="day-group">
                        <div class="day-header">
                            <span class="day-date">${day.date}</span>
                            <span class="day-weather" id="${weatherId}">Loading...</span>
                        </div>
                        ${itemsHtml}
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        function renderFlights() {
            const container = document.getElementById('flights-container');
            container.innerHTML = flights.map(f => `
                <div class="flight-card">
                    <div class="flight-route">
                        <span>${f.route}</span>
                        <span class="flight-code">${f.code}</span>
                    </div>
                    <div class="flight-detail">
                        <span>ğŸ•’ ${f.time}</span>
                        <span>Terminal: ${f.term}</span>
                    </div>
                </div>
            `).join('');
        }

        function renderHotels() {
            const container = document.getElementById('hotels-container');
            container.innerHTML = hotels.map(h => `
                <div class="card stay">
                    <div class="card-title">${h.name}</div>
                    <div class="card-desc" style="font-size:13px; color:#666;">
                        ğŸ“… ${h.date}<br>
                        ğŸ“ ${h.address}
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(h.name + " " + h.address)}" target="_blank" class="btn-nav">ğŸ¨ å°èˆªè‡³é£¯åº—</a>
                </div>
            `).join('');
        }

        function renderChecklist() {
            const container = document.getElementById('checklist-container');
            let html = '';
            
            // Load saved state
            const savedState = JSON.parse(localStorage.getItem('tripChecklist')) || {};

            for (const [category, items] of Object.entries(checklistData)) {
                html += `<div class="check-group"><div class="check-title">${category}</div>`;
                items.forEach(item => {
                    const isChecked = savedState[item] ? 'checked' : '';
                    html += `
                        <div class="check-item ${
