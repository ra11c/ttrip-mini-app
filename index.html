<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Ëä±Â§©Judy ÔΩúTravel Guide</title>
    <style>
        :root {
            /* Ë¶ñË¶∫È¢®Ê†ºÔºöÊó•ÂºèÊ•µÁ∞° x Ê≤ôÊº†È¢®ÊÉÖ */
            --bg-color: #F5F5F3; /* Ê∑∫ÁÅ∞Á±≥Ëâ≤ */
            --card-bg: #FFFFFF;
            --text-main: #2C3E50;
            --text-sub: #95A5A6;
            --accent-sand: #C0A080; /* Ê≤ôÊº†Èáë */
            --accent-pink: #E6B0AA; /* ‰πæÁá•Áé´Áë∞ */
            --accent-blue: #5D6D7E; /* Ê∑±ÁÅ∞Ëóç */
            --accent-green: #27AE60; /* On Time Á∂† */
            --border-radius: 16px;
            --shadow: 0 8px 30px rgba(0,0,0,0.04);
            --font-stack: -apple-system, BlinkMacSystemFont, "PingFang TC", "Microsoft JhengHei", sans-serif;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: var(--font-stack);
            margin: 0;
            padding: 0;
            padding-bottom: 110px; /* ÈÅøÈñãÂ∫ïÈÉ®Â∞éËà™ */
        }

        /* HEADER */
        header {
            padding: 40px 24px 15px 24px;
            background: rgba(245, 245, 243, 0.95);
            position: sticky;
            top: 0;
            z-index: 50;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0,0,0,0.03);
        }
        h1 { margin: 0; font-size: 22px; font-weight: 700; color: var(--text-main); letter-spacing: 0.5px; }
        .subtitle { font-size: 11px; color: var(--accent-sand); letter-spacing: 2px; text-transform: uppercase; margin-top: 6px; font-weight: 600; }

        /* HERO: UP NEXT */
        .hero-section { padding: 10px 20px 25px 20px; }
        .hero-card {
            background: linear-gradient(135deg, #FFFFFF 0%, #FDFBF7 100%);
            border-radius: var(--border-radius);
            padding: 24px;
            box-shadow: 0 10px 30px rgba(192, 160, 128, 0.15);
            border-left: 5px solid var(--accent-sand);
            position: relative;
        }
        .hero-label { font-size: 11px; font-weight: 800; color: var(--accent-sand); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .hero-title { font-size: 20px; font-weight: 700; margin-bottom: 8px; color: var(--text-main); }
        .hero-time { font-size: 14px; color: var(--text-sub); margin-bottom: 16px; display: flex; align-items: center; gap: 8px; font-weight: 500; }
        .countdown-badge {
            display: inline-flex; align-items: center; gap: 6px;
            background: var(--text-main); color: #FFF;
            padding: 6px 14px; border-radius: 30px;
            font-size: 13px; font-weight: 600; letter-spacing: 0.5px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        /* SECTIONS */
        .section { display: none; padding: 0 20px; animation: fadeIn 0.4s ease; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* TIMELINE LAYOUT */
        .date-header {
            margin: 30px 0 16px 4px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .date-text { font-size: 18px; font-weight: 800; color: var(--text-main); }
        
        .weather-badge {
            font-size: 12px; font-weight: 600;
            background: #FFF; border: 1px solid #EAEAEA;
            padding: 4px 10px; border-radius: 12px;
            color: #555; display: flex; align-items: center; gap: 6px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.03);
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 18px;
            margin-bottom: 16px;
            box-shadow: var(--shadow);
            border-left: 3px solid #E0E0E0;
            position: relative;
        }
        .card.transport { border-left-color: #BDC3C7; }
        .card.stay { border-left-color: var(--accent-sand); }
        .card.food { border-left-color: var(--accent-pink); }
        .card.activity { border-left-color: var(--accent-blue); }

        .card-time { font-size: 12px; color: var(--accent-sand); font-weight: 700; display: block; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
        .card-title { font-size: 17px; font-weight: 700; margin-bottom: 8px; line-height: 1.3; }
        .card-desc { font-size: 14px; color: #666; margin-bottom: 12px; line-height: 1.6; white-space: pre-line; }

        .btn-map {
            display: inline-flex; align-items: center; gap: 4px;
            background: #F4F4F4; color: #444; padding: 8px 14px;
            border-radius: 8px; font-size: 12px; font-weight: 600; text-decoration: none;
        }

        /* FLIGHTS (OPTIMIZED) */
        .luggage-alert {
            background: #FFF8E1; border: 1px solid #FFE0B2; color: #D35400;
            padding: 20px; border-radius: 16px; font-size: 14px; font-weight: 500;
            margin-bottom: 25px; line-height: 1.8; box-shadow: var(--shadow);
            position: relative; overflow: hidden;
        }
        .luggage-alert::before {
            content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 6px; background: #D35400;
        }
        
        .flight-card {
            background: #FFF; border-radius: 16px; padding: 22px;
            margin-bottom: 20px; box-shadow: var(--shadow);
            position: relative;
        }
        .fc-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 12px; border-bottom: 1px solid #F5F5F5; }
        .fc-airline { font-weight: 800; color: var(--text-main); font-size: 15px; }
        .fc-status { font-size: 11px; color: var(--accent-green); background: #E8F8F5; padding: 4px 8px; border-radius: 4px; font-weight: 700; }
        
        .fc-body { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; }
        .fc-port { text-align: center; width: 30%; }
        .fc-code { font-size: 26px; font-weight: 800; color: var(--text-main); display: block; line-height: 1; margin-bottom: 6px; }
        .fc-time { font-size: 13px; font-weight: 600; color: #555; }
        .fc-arrow { color: #DDD; font-size: 20px; flex: 1; text-align: center; display: flex; flex-direction: column; align-items: center; gap: 4px; }
        .fc-dur { font-size: 11px; color: #999; font-weight: 500; letter-spacing: 0.5px; }
        
        .fc-footer { background: #FAFAFA; padding: 12px 16px; border-radius: 10px; font-size: 12px; color: #666; display: flex; justify-content: space-between; align-items: center; }
        .fc-term { font-weight: 600; color: var(--text-main); }
        .fc-link { color: var(--accent-blue); text-decoration: none; font-weight: 700; display: flex; align-items: center; gap: 4px; }

        /* CHECKLIST PROGRESS */
        .progress-box {
            background: #FFF; padding: 20px; border-radius: 16px; box-shadow: var(--shadow); margin-bottom: 25px;
        }
        .progress-head { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 13px; font-weight: 700; color: var(--text-main); }
        .progress-track { background: #F0F0F0; height: 10px; border-radius: 5px; overflow: hidden; }
        .progress-fill { background: var(--accent-pink); height: 100%; width: 0%; transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1); }

        .check-group { margin-bottom: 30px; }
        .check-cat { font-size: 14px; font-weight: 800; color: var(--accent-sand); margin-bottom: 12px; letter-spacing: 0.5px; }
        .check-item { display: flex; align-items: center; padding: 12px 0; border-bottom: 1px solid #F5F5F5; cursor: pointer; transition: opacity 0.2s; }
        .checkbox { width: 22px; height: 22px; border: 2px solid #E0E0E0; border-radius: 50%; margin-right: 14px; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
        .check-item.checked .checkbox { background: var(--accent-pink); border-color: var(--accent-pink); }
        .check-item.checked .checkbox::after { content: '‚úì'; color: white; font-size: 12px; font-weight: bold; }
        .check-item.checked span { text-decoration: line-through; color: #CCC; }

        /* HIGHLIGHTS */
        .hl-photo { background: #EBF5FB; color: #2980B9; padding: 0 6px; border-radius: 4px; font-weight: 600; }
        .hl-alert { background: #FDEBD0; color: #D35400; padding: 0 6px; border-radius: 4px; font-weight: 600; }

        /* NAV */
        .bottom-nav {
            position: fixed; bottom: 0; width: 100%;
            background: rgba(255,255,255,0.96); backdrop-filter: blur(12px);
            border-top: 1px solid rgba(0,0,0,0.05);
            display: flex; padding: 12px 0 30px 0; z-index: 100;
        }
        .nav-item { flex: 1; text-align: center; color: #B0B0B0; cursor: pointer; transition: color 0.2s; }
        .nav-item.active { color: var(--text-main); }
        .nav-icon { font-size: 24px; display: block; margin-bottom: 4px; }
        .nav-text { font-size: 10px; font-weight: 700; }

    </style>
</head>
<body>

    <header>
        <h1>Ëä±Â§©Judy</h1>
        <span class="subtitle">Middle East 2026</span>
    </header>

    <div id="tab-timeline" class="section active">
        <div class="hero-section">
            <div class="hero-card" id="hero-card">
                <div class="hero-label">UP NEXT</div>
                <div class="hero-title">Ë®àÁÆó‰∏≠...</div>
            </div>
        </div>

        <div id="timeline-container"></div>
    </div>

    <div id="tab-info" class="section">
        
        <div class="luggage-alert">
            <h3 style="margin:0 0 10px 0; color:#E67E22; font-size:16px;">‚ö†Ô∏è Socotra Ë°åÊùéÊ≥®ÊÑè</h3>
            ‚Ä¢ <b>Ë®óÈÅã (Checked):</b> 23kg MAX<br>
            ‚Ä¢ <b>ÊâãÊèê (Hand):</b> 7kg MAX<br>
            ‚Ä¢ <b>Èö®Ë∫´ÂåÖ (Daypack):</b> ÁôªÂ±±ÂÅ•Ë°åÁî® (Ë£ùÁõ∏Ê©ü„ÄÅÊ∞¥„ÄÅÊØõÂ∑æ)
        </div>

        <div id="flights-container"></div>
        
        <div class="card stay">
            <div class="card-title">üè® ‰ΩèÂÆøÊ∏ÖÂñÆ</div>
            <div class="card-desc">
                <b>Jeddah:</b> Best Western Plus<br>
                <b>Socotra:</b> Camping (Private Tent)<br>
                <b>Dubai:</b> Grande Signature Apts
            </div>
        </div>
        
        <div class="card activity">
            <div class="card-title">üó∫Ô∏è Google Maps</div>
            <a href="http://googleusercontent.com/maps.google.com/8" target="_blank" class="btn-map" style="width:100%; justify-content:center;">ÈñãÂïüË°åÁ®ãÂú∞Âúñ</a>
        </div>
    </div>

    <div id="tab-checklist" class="section">
        <div class="progress-box">
            <div class="progress-head">
                <span>ÊâìÂåÖÈÄ≤Â∫¶</span>
                <span id="progress-text">0%</span>
            </div>
            <div class="progress-track">
                <div class="progress-fill" id="progress-bar"></div>
            </div>
        </div>
        <div id="checklist-container"></div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('timeline', this)">
            <span class="nav-icon">üìÖ</span>
            <span class="nav-text">Ë°åÁ®ã</span>
        </div>
        <div class="nav-item" onclick="switchTab('info', this)">
            <span class="nav-icon">‚úàÔ∏è</span>
            <span class="nav-text">Ëà™Áè≠</span>
        </div>
        <div class="nav-item" onclick="switchTab('checklist', this)">
            <span class="nav-icon">üéí</span>
            <span class="nav-text">ÊâìÂåÖ</span>
        </div>
    </nav>

    <script>
        // --- DATA ---

        const flightData = [
            { 
                airline: "Emirates 367", date: "2/15", status: "On Time",
                from: "TPE", to: "DXB", 
                dep: "23:00", arr: "04:50", 
                dur: "9h 50m", term: "Term 3", 
                link: "https://live.flighty.app/a670880c-7751-407c-b5a8-87722467c0e1" 
            },
            { 
                airline: "flynas 502", date: "2/16", status: "On Time",
                from: "DXB", to: "JED", 
                dep: "12:20", arr: "14:45", 
                dur: "3h 25m", term: "Term 1", 
                link: "https://live.flighty.app/5b0a7877-68a6-4356-923c-aac7d4f6912b" 
            },
            { 
                airline: "Yemenia 525", date: "2/17", status: "On Time",
                from: "JED", to: "SCT", 
                dep: "11:00", arr: "14:30", 
                dur: "3h 30m", term: "--", 
                link: "https://live.flighty.app/a7876470-8921-4d2b-a687-47d8713935e8" 
            },
            { 
                airline: "Yemenia 526", date: "2/23", status: "On Time",
                from: "SCT", to: "JED", 
                dep: "10:30", arr: "14:00", 
                dur: "3h 30m", term: "Term 1", 
                link: "https://live.flighty.app/bff8399b-7d51-49be-a55c-087b1584a38a" 
            },
            { 
                airline: "flynas 505", date: "2/23", status: "On Time",
                from: "JED", to: "DXB", 
                dep: "17:00", arr: "20:45", 
                dur: "2h 45m", term: "Term 1", 
                link: "https://live.flighty.app/d39029e5-fb8c-41c2-90d2-ffb64f9ae9c9" 
            },
            { 
                airline: "Emirates 386", date: "2/26", status: "On Time",
                from: "DXB", to: "TPE", 
                dep: "08:45", arr: "20:40", 
                dur: "7h 55m", term: "Term 2", 
                link: "https://live.flighty.app/c7c0ba09-1b65-40f0-b564-3e7ee2a59da9" 
            }
        ];

        // Ë°åÁ®ãË≥áÊñô & Ê≠∑Âè≤Â§©Ê∞£
        const itinerary = [
            {
                date: "2/15 (Êó•)", weather: "üåßÔ∏è 16-19¬∞C üíß60%",
                items: [
                    { t: "2026-02-15T23:00", time: "23:00", title: "EK367 Ëµ∑È£õ", type: "transport", desc: "ÂâçÂæÄÊùúÊãú | È£õË°åÊôÇÈñì 9hr 50m", nav: "Taoyuan Airport" }
                ]
            },
            {
                date: "2/16 (‰∏Ä)", weather: "‚òÄÔ∏è 20-29¬∞C üíß0%",
                items: [
                    { t: "2026-02-16T04:50", time: "04:50", title: "ÊäµÈÅîÊùúÊãú (DXB)", type: "transport", desc: "ËΩâÊ©üÁ≠âÂæÖ" },
                    { t: "2026-02-16T12:20", time: "12:20", title: "È£õÂæÄÂêâÈÅî (XY502)", type: "transport", desc: "FlyNas" },
                    { t: "2026-02-16T16:00", time: "Check-in", title: "Best Western Plus", type: "stay", desc: "Jeddah Hotel Madinah Road", nav: "Best Western Plus Jeddah" },
                    { t: "2026-02-16T19:00", time: "Dinner", title: "Waterfront Dinner", type: "food", desc: "ÂêâÈÅîÊø±Êµ∑Ë∑ØÊï£Ê≠•", nav: "Jeddah Corniche" }
                ]
            },
            {
                date: "2/17 (‰∫å)", weather: "üå§Ô∏è 22-28¬∞C üíß10%",
                items: [
                    { t: "2026-02-17T11:00", time: "11:00", title: "È£õÂæÄÁ¥¢ÁßëÁâπÊãâ", type: "transport", desc: "IY525" },
                    { t: "2026-02-17T14:30", time: "14:30", title: "Majestic White Dunes", type: "activity", desc: "ÊäµÈÅîÔºåÊê≠‰πò4x4„ÄÇÈÄîÁ∂ì Hadibo„ÄÇ" },
                    { t: "2026-02-17T18:00", time: "Night", title: "Erisel Beach Èú≤Ááü", type: "stay", desc: "ÁßÅ‰∫∫Â∏≥ÁØ∑Ôºå‰∫´ÂèóÊòüÁ©∫„ÄÇ", nav: "Arher Beach" }
                ]
            },
            {
                date: "2/18 (‰∏â)", weather: "‚òÄÔ∏è 23-29¬∞C üíß0%",
                items: [
                    { t: "2026-02-18T05:30", time: "Sunrise", title: "Arher Sand Dunes", type: "activity", desc: "ÂøÖÁúãÊó•Âá∫ÔºÅÊªëÊ≤ô„ÄÅÂ∞ãÊâæÊµ∑Ë±ö„ÄÇ", nav: "Arher Beach" },
                    { t: "2026-02-18T10:00", time: "AM", title: "Dihamri Êµ∑Ê¥ã‰øùË≠∑ÂçÄ", type: "activity", desc: "ÊµÆÊΩõÁÜ±Èªû (Snorkeling)ÔºåË±êÂØåÁèäÁëöËàáÈ≠öÁæ§„ÄÇ", nav: "Dihamri Marine Protected Area" },
                    { t: "2026-02-18T14:00", time: "PM", title: "Homhil ÁÑ°ÈÇäÈöõÊ≥≥Ê±†", type: "activity", desc: "ÁµïÁæéÂ§©ÁÑ∂Ê≥≥Ê±† (Infinity Pool)„ÄÇ", nav: "Homhil Protected Area" },
                    { t: "2026-02-18T19:00", time: "Night", title: "Erisel Beach Èú≤Ááü", type: "stay", desc: "ËøîÂõûÊù±Â≤∏Èú≤Ááü„ÄÇ" }
                ]
            },
            {
                date: "2/19 (Âõõ)", weather: "üå§Ô∏è 21-27¬∞C üíß20%",
                items: [
                    { t: "2026-02-19T08:00", time: "AM", title: "Kaleesan White Canyon", type: "activity", desc: "ÁôΩËâ≤Â≥ΩË∞∑Ê∏∏Ê≥≥Ë∑≥Ê∞¥„ÄÇ", nav: "Wadi Kalisan" },
                    { t: "2026-02-19T14:00", time: "PM", title: "Zahek Desert & Camel", type: "activity", desc: "Ê≤ôÊº†Êº´Ê≠•ËàáÈ®éÈß±Èßù„ÄÇ", nav: "Zahek Dunes" },
                    { t: "2026-02-19T16:00", time: "Stop", title: "Digub Cave", type: "activity", desc: "Â∑®Â§ßÊ¥ûÁ©¥„ÄÇ", nav: "Digub Cave" },
                    { t: "2026-02-19T18:00", time: "Night", title: "Fermhin Forest Camp", type: "stay", desc: "‰∏ñÁïåÊúÄÂ§ßÈæçË°ÄÊ®πÊ£ÆÊûóÈú≤Ááü„ÄÇ", nav: "Fermhin Forest" }
                ]
            },
            {
                date: "2/20 (‰∫î)", weather: "‚òÅÔ∏è 18-25¬∞C üíß10%",
                items: [
                    { t: "2026-02-20T06:00", time: "Sunrise", title: "ÈæçË°ÄÊ®πÊ£ÆÊûóÊó•Âá∫", type: "activity", desc: "Êé¢Á¥¢ÁâπÊúâÁ®ÆÂãïÊ§çÁâ©„ÄÇ" },
                    { t: "2026-02-20T14:00", time: "PM", title: "Bedouin ÊùëËêΩ", type: "activity", desc: "ÂèÉËßÄÈæçË°ÄÊ®πËãóÂúÉ„ÄÇ" },
                    { t: "2026-02-20T18:00", time: "Night", title: "Fermhin Forest Camp", type: "stay", desc: "Ê£ÆÊûóÈú≤Ááü„ÄÇ" }
                ]
            },
            {
                date: "2/21 (ÂÖ≠)", weather: "‚òÄÔ∏è 23-30¬∞C üíß0%",
                items: [
                    { t: "2026-02-21T09:00", time: "Day", title: "Detwah Lagoon", type: "activity", desc: "ÂøÖË®™ËóçËâ≤ÊΩüÊπñÔºÅÁôΩÊ≤ôËàáËóçÊ∞¥„ÄÇ", nav: "Detwah Lagoon" },
                    { t: "2026-02-21T17:00", time: "Sunset", title: "ÊΩüÊπñÂ±±È†ÇÊó•ËêΩ", type: "activity", desc: "Â∞ãÊâæÂ≠§Áç®Áì∂Â≠êÊ®πÔºå‰øØÁû∞ÂÖ®ÊôØ„ÄÇ" },
                    { t: "2026-02-21T19:00", time: "Night", title: "Detwah Lagoon Camp", type: "stay", desc: "ÊΩüÊπñÊóÅÂ∞àÂ±¨ÁáüÂú∞„ÄÇ" }
                ]
            },
            {
                date: "2/22 (Êó•)", weather: "‚òÄÔ∏è 24-30¬∞C üíß0%",
                items: [
                    { t: "2026-02-22T08:00", time: "AM", title: "Shoab Golden Beach", type: "activity", desc: "Êê≠ËàπÂâçÂæÄÈªÉÈáëÊµ∑ÁÅòÔºåÂ∞ãÊâæÊµ∑Ë±ö„ÄÇ", nav: "Shoab Beach" },
                    { t: "2026-02-22T14:00", time: "PM", title: "Qalansiyah Â∞èÈéÆ", type: "activity", desc: "ÂèÉËßÄÂüéÈéÆËàáÊîæÈ¨Ü„ÄÇ", nav: "Qalansiyah" },
                    { t: "2026-02-22T18:00", time: "Night", title: "Detwah Lagoon Camp", type: "stay", desc: "ÊúÄÂæå‰∏ÄÊôö„ÄÇ" }
                ]
            },
            {
                date: "2/23 (‰∏Ä)", weather: "‚òÄÔ∏è 20-28¬∞C üíß0%",
                items: [
                    { t: "2026-02-23T08:00", time: "AM", title: "ÂëäÂà•Á¥¢ÁßëÁâπÊãâ", type: "activity", desc: "‰øÑÁæÖÊñØÂù¶ÂÖãÈÅ∫Ë∑°ÊãçÁÖß„ÄÇ", nav: "Russian Tanks Socotra" },
                    { t: "2026-02-23T10:30", time: "10:30", title: "SCT ‚Üí JED", type: "transport", desc: "IY526" },
                    { t: "2026-02-23T17:00", time: "17:00", title: "JED ‚Üí DXB", type: "transport", desc: "XY505" },
                    { t: "2026-02-23T21:00", time: "Check-in", title: "Grande Signature", type: "stay", desc: "Downtown Dubai", nav: "Grande Signature Apartments Dubai" }
                ]
            },
            {
                date: "2/24 (‰∫å)", weather: "‚òÄÔ∏è 19-27¬∞C üíß0%",
                items: [
                    { t: "2026-02-24T09:00", time: "AM", title: "Â§ßÊ∏ÖÁúüÂØ∫", type: "activity", desc: "Ê≥®ÊÑèÊúçË£ùÔºÅSheikh Zayed Grand Mosque", nav: "Sheikh Zayed Grand Mosque" },
                    { t: "2026-02-24T12:00", time: "Noon", title: "ÁæÖÊµÆÂÆÆÂçöÁâ©È§®", type: "activity", desc: "Louvre Abu Dhabi", nav: "Louvre Abu Dhabi" },
                    { t: "2026-02-24T15:00", time: "PM", title: "È®éÈ¶¨È´îÈ©ó", type: "activity", desc: "‰∏ãÂçàÊ¥ªÂãï" },
                    { t: "2026-02-24T19:00", time: "Dinner", title: "Time Out Market", type: "food", desc: "ÊôöÈ§êËàáÂìàÈáåÁôºÂ°îÊ∞¥ËàûÁßÄ", nav: "Time Out Market Dubai" }
                ]
            },
            {
                date: "2/25 (‰∏â)", weather: "‚òÄÔ∏è 19-28¬∞C üíß0%",
                items: [
                    { t: "2026-02-25T10:00", time: "Day", title: "ÊùúÊãúÂüéÂ∏ÇÈ´îÈ©ó", type: "activity", desc: "ËàäÂüéÂçÄÊï£Ê≠•„ÄÅÂìàÈáåÁôºÂ°î 124F", nav: "Burj Khalifa" },
                    { t: "2026-02-25T17:00", time: "Dinner", title: "Ê≤ôÊº†ÊôöÈ§ê", type: "food", desc: "Desert Safari" }
                ]
            },
            {
                date: "2/26 (Âõõ)", weather: "üåßÔ∏è 16-20¬∞C üíß50%",
                items: [
                    { t: "2026-02-26T08:45", time: "08:45", title: "EK386 Ëµ∑È£õ", type: "transport", desc: "ËøîÂõûÂè∞Âåó" }
                ]
            }
        ];

        const checklistData = {
            "Èö®Ë∫´ÂåÖ": ["ÊâãÊ©ü", "Ë≠∑ÁÖß", "Visa (Á¥ôÊú¨+ÊâãÊ©ü)", "Ê©üÁ•® / ÈõªÂ≠êÁ•®", "Drone permit", "‰øùÈö™Ë≥áÊñô", "‰ø°Áî®Âç°", "ÁæéÈáëÁèæÈáë (Êñ∞Èàî)", "Â∞èË≤ª", "Ë°åÂãïÈõªÊ∫ê", "ÂÖÖÈõªÁ∑ö", "ËΩâÊé•È†≠ ‚≠ê", "ËÄ≥Ê©ü", "È†∏Êûï/ÁúºÁΩ©", "Ë≠∑ÂîáËÜè", "Èö±ÂΩ¢ÁúºÈè°+Ëó•Ê∞¥", "ÁúºÈè°", "Ë®òÊÜ∂Âç°", "Á≠Ü"],
            "Ë°£Áâ©ÈûãÂ±•": ["‰∏äË°£", "Áü≠Ë§≤", "Èï∑Ë§≤", "Áù°Ë°£", "ÂÖßË°£Ë§≤", "Ê≥≥Ë°£", "Èï∑Ë£ô/Èï∑Ë§≤ (Ê∏ÖÁúüÂØ∫)", "ÂÅ•Ë°åÈûã", "Ê∂ºÈûã/ÊãñÈûã"],
            "Èò≤Êõ¨Êà∂Â§ñ": ["Â§™ÈôΩÁúºÈè°", "Â∏ΩÂ≠ê", "SPF50Èò≤Êõ¨", "ËòÜËñà", "UVÁΩ©Ë°´", "Ê∞¥ÊØçË°£", "È†≠Ááà", "Âø´‰πæÊØõÂ∑æ", "ÊøïÁ¥ôÂ∑æ", "Áõ•Ê¥óÁî®ÂìÅ", "‰øùÊøï‰π≥Ê∂≤", "Ê∞¥Â£∫"],
            "ÈõªÂ≠êÂÖ∂‰ªñ": ["Áõ∏Ê©ü+ÈõªÊ±†", "Drone+ÂÇôÈõª", "Èò≤Ê∞¥Ë¢ã", "Èò≤Â°µÂè£ÁΩ©/Buff", "Èõ∂È£ü", "Á©∫Ë≥ºÁâ©Ë¢ã"]
        };

        // --- FUNCTIONS ---

        function init() {
            renderTimeline();
            updateUpNext();
            renderFlights();
            renderChecklist();
            setInterval(updateUpNext, 60000);
        }

        // 1. Up Next (Êô∫ÊÖßÂÄíÊï∏)
        function updateUpNext() {
            const now = new Date();
            // Ê∏¨Ë©¶Áî®ÔºöËß£Èô§‰∏ãÊñπË®ªËß£ÂèØÊ®°Êì¨ÊóÖÁ®ã‰∏≠ÁöÑÊôÇÈñì
            // const now = new Date("2026-02-16T10:00:00"); 

            let nextItem = null;
            let minDiff = Infinity;

            for (const day of itinerary) {
                for (const item of day.items) {
                    const itemTime = new Date(item.t);
                    const diff = itemTime - now;
                    if (diff > 0 && diff < minDiff) {
                        minDiff = diff;
                        nextItem = { ...item, diff: diff };
                    }
                }
            }

            const heroCard = document.getElementById('hero-card');
            if (nextItem) {
                const hours = Math.floor(nextItem.diff / (1000 * 60 * 60));
                const mins = Math.floor((nextItem.diff % (1000 * 60 * 60)) / (1000 * 60));
                let timeLeft = hours > 24 ? `${Math.floor(hours/24)} Â§©` : `${hours}ÊôÇ ${mins}ÂàÜ`;

                heroCard.innerHTML = `
                    <div class="hero-label">UP NEXT ‰∏ã‰∏ÄÂÄãË°åÁ®ã</div>
                    <div class="hero-title">${nextItem.title}</div>
                    <div class="hero-time">
                        <span>${nextItem.time}</span>
                        <span>|</span>
                        <span>${nextItem.desc.split('|')[0]}</span>
                    </div>
                    <div class="countdown-badge">‚è≥ ÈÇÑÊúâ ${timeLeft}</div>
                `;
            } else {
                heroCard.innerHTML = `<div class="hero-title">ÊóÖÁ®ãÂ∑≤ÁµêÊùü ‚ú®</div>`;
            }
        }

        // 2. Render Timeline
        function renderTimeline() {
            const container = document.getElementById('timeline-container');
            container.innerHTML = itinerary.map(day => `
                <div class="date-header">
                    <span class="date-text">${day.date}</span>
                    <div class="weather-badge">${day.weather}</div>
                </div>
                ${day.items.map(item => `
                    <div class="card ${item.type}">
                        <span class="card-time">${item.time}</span>
                        <div class="card-title">${item.title}</div>
                        <div class="card-desc">${highlightText(item.desc)}</div>
                        ${item.nav ? `<a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.nav)}" target="_blank" class="btn-map">üìç Â∞éËà™</a>` : ''}
                    </div>
                `).join('')}
            `).join('');
        }

        // 3. Flights (Optimized Card)
        function renderFlights() {
            const container = document.getElementById('flights-container');
            container.innerHTML = flightData.map(f => `
                <div class="flight-card">
                    <div class="fc-head">
                        <div>
                            <span class="fc-airline">${f.airline}</span>
                            <div style="font-size:12px; color:#999; margin-top:2px;">${f.date}</div>
                        </div>
                        <span class="fc-status">‚óè ${f.status}</span>
                    </div>
                    
                    <div class="fc-body">
                        <div class="fc-port">
                            <span class="fc-code">${f.from}</span>
                            <span class="fc-time">${f.dep}</span>
                        </div>
                        <div class="fc-arrow">
                            <span style="font-size:14px;">‚úà</span>
                            <span class="fc-dur">${f.dur}</span>
                        </div>
                        <div class="fc-port">
                            <span class="fc-code">${f.to}</span>
                            <span class="fc-time">${f.arr}</span>
                        </div>
                    </div>

                    <div class="fc-footer">
                        <span class="fc-term">üìç ${f.term}</span>
                        <a href="${f.link}" target="_blank" class="fc-link">Updates ></a>
                    </div>
                </div>
            `).join('');
        }

        // 4. Checklist Progress
        function updateProgress() {
            const saved = JSON.parse(localStorage.getItem('judyChecklist')) || {};
            let total = 0, checked = 0;
            Object.values(checklistData).forEach(arr => {
                total += arr.length;
                arr.forEach(i => { if(saved[i]) checked++; });
            });
            const percent = total ? Math.round((checked/total)*100) : 0;
            document.getElementById('progress-text').innerText = `${checked}/${total} (${percent}%)`;
            document.getElementById('progress-bar').style.width = `${percent}%`;
        }

        function renderChecklist() {
            const container = document.getElementById('checklist-container');
            const saved = JSON.parse(localStorage.getItem('judyChecklist')) || {};
            let html = '';
            for (const [cat, items] of Object.entries(checklistData)) {
                html += `<div class="check-group"><div class="check-cat">${cat}</div>`;
                items.forEach(item => {
                    const isChecked = saved[item] ? 'checked' : '';
                    html += `<div class="check-item ${isChecked}" onclick="toggleCheck(this, '${item}')">
                        <div class="checkbox"></div><span>${highlightText(item)}</span></div>`;
                });
                html += `</div>`;
            }
            container.innerHTML = html;
            updateProgress();
        }

        function toggleCheck(el, item) {
            el.classList.toggle('checked');
            const saved = JSON.parse(localStorage.getItem('judyChecklist')) || {};
            if(el.classList.contains('checked')) saved[item] = true;
            else delete saved[item];
            localStorage.setItem('judyChecklist', JSON.stringify(saved));
            updateProgress();
        }

        function highlightText(text) {
            return text.replace(/(ÂøÖÊãç|ÂøÖÁúã|Êó•Âá∫|Êµ∑Ë±ö)/g, '<span class="hl-photo">$1</span>')
                       .replace(/(Ë≠∑ÁÖß|Visa|ÁèæÈáë|Ê≥®ÊÑè|ÊúçË£ù)/g, '<span class="hl-alert">$1</span>');
        }

        function switchTab(tabId, btn) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById('tab-' + tabId).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            btn.classList.add('active');
            window.scrollTo(0,0);
        }

        init();
    </script>
</body>
</html>
